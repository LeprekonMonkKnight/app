{"ast":null,"code":"var _jsxFileName = \"D:\\\\lum3k\\\\Desktop\\\\vkApp\\\\src\\\\App.js\";\nimport React from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport { View } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Items from './panels/Items';\nimport Item from './panels/Item';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.go = (e, object) => {\n      let activePanel = e.currentTarget.dataset.to;\n      this.setState({\n        activePanel: activePanel\n      });\n\n      if (activePanel === 'items') {\n        connect.send(\"VKWebAppSetLocation\", {\n          \"location\": \"items\"\n        });\n        this.getItems();\n      }\n\n      if (activePanel === 'item') {\n        connect.send(\"VKWebAppSetLocation\", {\n          \"location\": \"item\".concat(object.itemId)\n        });\n        this.getInfoItem(object.itemId);\n      }\n    };\n\n    this.state = {\n      activePanel: 'items',\n      authToken: null,\n      items: [],\n      item: null\n    };\n  }\n\n  getLocationHash() {\n    return window.location.hash.replace('#', '');\n  }\n\n  componentWillMount() {\n    connect.subscribe(e => {\n      switch (e.detail.type) {\n        case 'VKWebAppAccessTokenReceived':\n          this.setState({\n            authToken: e.detail.data.access_token\n          }, function () {\n            let hash = this.getLocationHash();\n\n            if (hash === 'items') {\n              this.setState({\n                activePanel: 'items'\n              }, function () {\n                this.getItems();\n              });\n            } else if (hash.indexOf('item') !== -1) {\n              let id = hash.replace('item', '');\n              this.setState({\n                activePanel: 'item'\n              }, function () {\n                this.getInfoItem(id);\n              });\n            } else {\n              this.setState({\n                activePanel: 'items'\n              }, function () {\n                this.getItems();\n              });\n            }\n          });\n          break;\n\n        case 'VKWebAppCallAPIMethodResult':\n          if (e.detail.data.request_id === \"items\") {\n            this.setState({\n              items: e.detail.data.response.items\n            });\n          }\n\n          if (e.detail.data.request_id === \"item\") {\n            this.setState({\n              item: e.detail.data.response.items[0]\n            });\n          }\n\n          break;\n\n        default:\n          console.log(e.detail);\n      }\n    });\n    connect.send(\"VKWebAppGetAuthToken\", {\n      \"app_id\": 6906999,\n      \"scope\": \"market\"\n    });\n  }\n\n  getItems() {\n    const ownerId = -124527492;\n    connect.send(\"VKWebAppCallAPIMethod\", {\n      \"method\": \"market.get\",\n      \"request_id\": \"items\",\n      \"params\": {\n        \"owner_id\": ownerId,\n        \"v\": \"5.92\",\n        \"access_token\": this.state.authToken\n      }\n    });\n  }\n\n  getInfoItem(id) {\n    const ownerId = -124527492;\n    let itemId = \"\".concat(ownerId, \"_\").concat(id);\n    connect.send(\"VKWebAppCallAPIMethod\", {\n      \"method\": \"market.getById\",\n      \"request_id\": \"item\",\n      \"params\": {\n        \"item_ids\": itemId,\n        \"v\": \"5.92\",\n        \"extended\": 1,\n        \"access_token\": this.state.authToken\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(View, {\n      activePanel: this.state.activePanel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(Items, {\n      id: \"items\",\n      items: this.state.items,\n      go: this.go,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(Item, {\n      id: \"item\",\n      item: this.state.item,\n      go: this.go,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/lum3k/Desktop/vkApp/src/App.js"],"names":["React","connect","View","Items","Item","App","Component","constructor","props","go","e","object","activePanel","currentTarget","dataset","to","setState","send","getItems","itemId","getInfoItem","state","authToken","items","item","getLocationHash","window","location","hash","replace","componentWillMount","subscribe","detail","type","data","access_token","indexOf","id","request_id","response","console","log","ownerId","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport { View } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Items from './panels/Items';\nimport Item from './panels/Item';\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactivePanel : 'items',\n\t\t\tauthToken : null,\n\t\t\titems : [],\n\t\t\titem : null\n\t\t};\n\t}\n\n\tgetLocationHash() {\n\t\treturn window.location.hash.replace('#','')\n\t}\n\n\tcomponentWillMount() {\n\t\tconnect.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppAccessTokenReceived':\n\t\t\t\t\tthis.setState({ authToken : e.detail.data.access_token }, function() {\n\t\t\t\t\t\tlet hash = this.getLocationHash()\n\t\t\t\t\t\tif (hash === 'items') {\n\t\t\t\t\t\t\tthis.setState({ activePanel : 'items' }, function() { this.getItems() })\n\t\t\t\t\t\t} else if (hash.indexOf('item') !== -1) {\n\t\t\t\t\t\t\tlet id = hash.replace('item','')\n\t\t\t\t\t\t\tthis.setState({ activePanel : 'item' }, function() { this.getInfoItem(id) })\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setState({ activePanel : 'items' }, function() { this.getItems() })\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppCallAPIMethodResult':\n\t\t\t\t\tif (e.detail.data.request_id === \"items\") {\n\t\t\t\t\t\tthis.setState({ items : e.detail.data.response.items })\n\t\t\t\t\t}\n\t\t\t\t\tif (e.detail.data.request_id === \"item\") {\n\t\t\t\t\t\tthis.setState({ item : e.detail.data.response.items[0] })\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(e.detail);\n\t\t\t}\n\t\t});\n\t\tconnect.send(\"VKWebAppGetAuthToken\", {\"app_id\": 6906999, \"scope\": \"market\"});\n\t}\n\n\tgetItems() {\n\t\tconst ownerId = -124527492\n\t\tconnect.send(\"VKWebAppCallAPIMethod\", {\"method\": \"market.get\", \"request_id\" : \"items\", \"params\": {\"owner_id\": ownerId , \"v\":\"5.92\", \"access_token\": this.state.authToken }});\n\t}\n\n\tgetInfoItem(id) {\n\t\tconst ownerId = -124527492\n\t\tlet itemId = `${ownerId}_${id}`\n\t\tconnect.send(\"VKWebAppCallAPIMethod\", {\"method\": \"market.getById\", \"request_id\" : \"item\",  \"params\": {\"item_ids\": itemId , \"v\":\"5.92\", \"extended\" : 1,  \"access_token\": this.state.authToken }});\n\t}\n\n\tgo = (e, object) => {\n\t\tlet activePanel = e.currentTarget.dataset.to\n\t\tthis.setState({ activePanel : activePanel })\n\t\tif (activePanel === 'items') {\n\t\t\tconnect.send(\"VKWebAppSetLocation\", {\"location\": \"items\"});\n\t\t\tthis.getItems()\n\t\t}\n\t\tif (activePanel === 'item') {\n\t\t\tconnect.send(\"VKWebAppSetLocation\", {\"location\": `item${object.itemId}`});\n\t\t\tthis.getInfoItem(object.itemId)\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel}>\n\t\t\t\t<Items \n\t\t\t\t\tid=\"items\" \n\t\t\t\t\titems={this.state.items}\n\t\t\t\t\tgo={this.go}\n\t\t\t\t/>\n\t\t\t\t<Item \n\t\t\t\t\tid=\"item\"\n\t\t\t\t\titem={this.state.item}\n\t\t\t\t\tgo={this.go}\n\t\t\t\t/>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}