{"ast":null,"code":"var _jsxFileName = \"D:\\\\lum3k\\\\Desktop\\\\vkApp\\\\src\\\\App.js\";\nimport React from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport fetchJsonp from 'fetch-jsonp';\nimport Home from './panels/Home';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.go = e => {\n      this.setState(e.currentTarget.dataset.to);\n    };\n\n    this.state = {\n      activePanel: 'home',\n      fetchedUser: null,\n      authToken: null\n    };\n  }\n\n  componentDidMount() {\n    connect.subscribe(e => {\n      switch (e.detail.type) {\n        case 'VKWebAppGetUserInfoResult':\n          this.setState({\n            fetchedUser: e.detail.data\n          });\n          break;\n\n        case 'VkWebAppAccessTokenReceived':\n          this.setState({\n            authToken: e.detail.data.access_token\n          });\n          break;\n\n        default:\n          console.log(e.detail.type);\n      }\n    });\n    connect.send('VKWebAppGetUserInfo', {});\n    connect.send('VKWebAppGetAuthToken', {\n      'app_id': 6906999,\n      'scope': 'market'\n    });\n  }\n\n  getItems() {\n    const ownerId = 124527492;\n    let api = 'https://api.vk.com/method/market.get?v=5.52&access_token=${this.state.authToken}&owner_id=-${ownerId}';\n    fetchJsonp(api).then(res => res.json()).then(data => data.response.item).catch(e => []);\n  }\n\n  render() {\n    return React.createElement(View, {\n      activePanel: this.state.activePanel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(Home, {\n      id: \"home\",\n      items: this.state.items,\n      fetchedUser: this.state.fetchedUser,\n      go: this.state.go,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/lum3k/Desktop/vkApp/src/App.js"],"names":["React","connect","View","fetchJsonp","Home","App","Component","constructor","props","go","e","setState","currentTarget","dataset","to","state","activePanel","fetchedUser","authToken","componentDidMount","subscribe","detail","type","data","access_token","console","log","send","getItems","ownerId","api","then","res","json","response","item","catch","render","items"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,IAAP,MAAiB,2CAAjB;AACA,OAAO,+BAAP;AACA,OAAOC,UAAP,MAAuB,aAAvB;AAEA,OAAOC,IAAP,MAAiB,eAAjB;;AAEA,MAAMC,GAAN,SAAkBL,KAAK,CAACM,SAAxB,CAAkC;AACjCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;;AADkB,SA0BnBC,EA1BmB,GA0BdC,CAAC,IAAI;AACT,WAAKC,QAAL,CAAcD,CAAC,CAACE,aAAF,CAAgBC,OAAhB,CAAwBC,EAAtC;AACA,KA5BkB;;AAElB,SAAKC,KAAL,GAAa;AACZC,MAAAA,WAAW,EAAE,MADD;AAEZC,MAAAA,WAAW,EAAE,IAFD;AAGZC,MAAAA,SAAS,EAAE;AAHC,KAAb;AAKA;;AAEDC,EAAAA,iBAAiB,GAAG;AACnBlB,IAAAA,OAAO,CAACmB,SAAR,CAAmBV,CAAD,IAAO;AACxB,cAAQA,CAAC,CAACW,MAAF,CAASC,IAAjB;AACC,aAAK,2BAAL;AACC,eAAKX,QAAL,CAAc;AAACM,YAAAA,WAAW,EAAEP,CAAC,CAACW,MAAF,CAASE;AAAvB,WAAd;AACA;;AACD,aAAK,6BAAL;AACC,eAAKZ,QAAL,CAAc;AAACO,YAAAA,SAAS,EAAER,CAAC,CAACW,MAAF,CAASE,IAAT,CAAcC;AAA1B,WAAd;AACA;;AACD;AACCC,UAAAA,OAAO,CAACC,GAAR,CAAYhB,CAAC,CAACW,MAAF,CAASC,IAArB;AARF;AAUA,KAXD;AAYArB,IAAAA,OAAO,CAAC0B,IAAR,CAAa,qBAAb,EAAoC,EAApC;AACA1B,IAAAA,OAAO,CAAC0B,IAAR,CAAa,sBAAb,EAAqC;AAAC,gBAAU,OAAX;AAAoB,eAAS;AAA7B,KAArC;AACA;;AAMDC,EAAAA,QAAQ,GAAG;AACV,UAAMC,OAAO,GAAG,SAAhB;AACA,QAAIC,GAAG,GAAG,uGAAV;AACA3B,IAAAA,UAAU,CAAC2B,GAAD,CAAV,CACCC,IADD,CACMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADb,EAECF,IAFD,CAEMR,IAAI,IAAIA,IAAI,CAACW,QAAL,CAAcC,IAF5B,EAGCC,KAHD,CAGO1B,CAAC,IAAI,EAHZ;AAIA;;AAED2B,EAAAA,MAAM,GAAG;AACR,WACC,oBAAC,IAAD;AAAM,MAAA,WAAW,EAAE,KAAKtB,KAAL,CAAWC,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,MAAT;AAAgB,MAAA,KAAK,EAAE,KAAKD,KAAL,CAAWuB,KAAlC;AAAyC,MAAA,WAAW,EAAE,KAAKvB,KAAL,CAAWE,WAAjE;AAA8E,MAAA,EAAE,EAAE,KAAKF,KAAL,CAAWN,EAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CADD;AAKA;;AA9CgC;;AAgDlC,eAAeJ,GAAf","sourcesContent":["import React from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport fetchJsonp from 'fetch-jsonp';\n\nimport Home from './panels/Home';\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tactivePanel: 'home',\n\t\t\tfetchedUser: null,\n\t\t\tauthToken: null,\n\t\t};\n\t};\n\n\tcomponentDidMount() {\n\t\tconnect.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tthis.setState({fetchedUser: e.detail.data});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VkWebAppAccessTokenReceived':\n\t\t\t\t\tthis.setState({authToken: e.detail.data.access_token});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(e.detail.type);\n\t\t\t}\n\t\t});\n\t\tconnect.send('VKWebAppGetUserInfo', {});\n\t\tconnect.send('VKWebAppGetAuthToken', {'app_id': 6906999, 'scope': 'market'});\n\t};\n\n\tgo = e => {\n\t\tthis.setState(e.currentTarget.dataset.to);\n\t};\n\n\tgetItems() {\n\t\tconst ownerId = 124527492\n\t\tlet api = 'https://api.vk.com/method/market.get?v=5.52&access_token=${this.state.authToken}&owner_id=-${ownerId}'\n\t\tfetchJsonp(api)\n\t\t.then(res => res.json())\n\t\t.then(data => data.response.item)\n\t\t.catch(e => [])\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel}>\n\t\t\t\t<Home id='home' items={this.state.items} fetchedUser={this.state.fetchedUser} go={this.state.go} />\n\t\t\t</View>\n\t\t);\n\t};  \n}\nexport default App;"]},"metadata":{},"sourceType":"module"}