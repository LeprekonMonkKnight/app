{"ast":null,"code":"var _jsxFileName = \"D:\\\\lum3k\\\\Desktop\\\\vkApp\\\\src\\\\App.js\";\nimport React from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport { View } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Items from './panels/Items';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.go = e => {\n      this.setState({\n        activePanel: e.currentTarget.dataset.to\n      });\n    };\n\n    this.state = {\n      activePanel: 'items',\n      fetchedUser: null,\n      authToken: null,\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    connect.subscribe(e => {\n      switch (e.detail.type) {\n        case 'VKWebAppGetUserInfoResult':\n          if (e.detail.data.request_id === \"items\") {\n            this.setState({\n              items: e.detail.data.response.items\n            });\n          }\n\n          break;\n\n        case 'VKWebAppAccessTokenReceived':\n          this.setState({\n            authToken: e.detail.data.access_token\n          });\n          this.getItems();\n          break;\n\n        default:\n          console.log(e.detail.type);\n      }\n    });\n    connect.send('VKWebAppGetUserInfo', {});\n    connect.send('VKWebAppGetAuthToken', {\n      'app_id': 6396978,\n      'scope': 'market'\n    });\n  }\n\n  getItems() {\n    const ownerId = -124527492;\n    connect.send('VKWebAppCallAPIMethod', {\n      \"method\": \"market.get\",\n      \"request_id\": \"items\",\n      \"params\": {\n        \"owner_id\": ownerId,\n        \"v\": \"5.92\",\n        \"access_token\": this.state.authToken\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(View, {\n      activePanel: this.state.activePanel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(Items, {\n      id: \"items\",\n      items: this.state.items,\n      authToken: this.state.authToken,\n      fetchedUser: this.state.fetchedUser,\n      go: this.go,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/lum3k/Desktop/vkApp/src/App.js"],"names":["React","connect","View","Items","App","Component","constructor","props","go","e","setState","activePanel","currentTarget","dataset","to","state","fetchedUser","authToken","items","componentDidMount","subscribe","detail","type","data","request_id","response","access_token","getItems","console","log","send","ownerId","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAAQC,IAAR,QAAmB,iBAAnB;AACA,OAAO,+BAAP;AAEA,OAAOC,KAAP,MAAkB,gBAAlB;;AAEA,MAAMC,GAAN,SAAkBJ,KAAK,CAACK,SAAxB,CAAkC;AAC9BC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAkCnBC,EAlCmB,GAkCbC,CAAD,IAAO;AACR,WAAKC,QAAL,CAAc;AAACC,QAAAA,WAAW,EAAEF,CAAC,CAACG,aAAF,CAAgBC,OAAhB,CAAwBC;AAAtC,OAAd;AACH,KApCkB;;AAEf,SAAKC,KAAL,GAAa;AACTJ,MAAAA,WAAW,EAAE,OADJ;AAETK,MAAAA,WAAW,EAAE,IAFJ;AAGTC,MAAAA,SAAS,EAAE,IAHF;AAITC,MAAAA,KAAK,EAAE;AAJE,KAAb;AAOH;;AAGDC,EAAAA,iBAAiB,GAAG;AAChBlB,IAAAA,OAAO,CAACmB,SAAR,CAAmBX,CAAD,IAAO;AACrB,cAAQA,CAAC,CAACY,MAAF,CAASC,IAAjB;AACI,aAAK,2BAAL;AACI,cAAIb,CAAC,CAACY,MAAF,CAASE,IAAT,CAAcC,UAAd,KAA6B,OAAjC,EAA0C;AACtC,iBAAKd,QAAL,CAAc;AACVQ,cAAAA,KAAK,EAAET,CAAC,CAACY,MAAF,CAASE,IAAT,CAAcE,QAAd,CAAuBP;AADpB,aAAd;AAGH;;AACD;;AACJ,aAAK,6BAAL;AACI,eAAKR,QAAL,CAAc;AAACO,YAAAA,SAAS,EAAER,CAAC,CAACY,MAAF,CAASE,IAAT,CAAcG;AAA1B,WAAd;AACA,eAAKC,QAAL;AACA;;AACJ;AACIC,UAAAA,OAAO,CAACC,GAAR,CAAYpB,CAAC,CAACY,MAAF,CAASC,IAArB;AAbR;AAeH,KAhBD;AAiBArB,IAAAA,OAAO,CAAC6B,IAAR,CAAa,qBAAb,EAAoC,EAApC;AACA7B,IAAAA,OAAO,CAAC6B,IAAR,CAAa,sBAAb,EAAqC;AAAC,gBAAU,OAAX;AAAoB,eAAS;AAA7B,KAArC;AACH;;AAMDH,EAAAA,QAAQ,GAAG;AACP,UAAMI,OAAO,GAAG,CAAC,SAAjB;AACA9B,IAAAA,OAAO,CAAC6B,IAAR,CAAa,uBAAb,EAAsC;AAClC,gBAAU,YADwB;AAElC,oBAAc,OAFoB;AAGlC,gBAAU;AACN,oBAAYC,OADN;AAEN,aAAK,MAFC;AAGN,wBAAgB,KAAKhB,KAAL,CAAWE;AAHrB;AAHwB,KAAtC;AAUH;;AAEDe,EAAAA,MAAM,GAAG;AACL,WACI,oBAAC,IAAD;AAAM,MAAA,WAAW,EAAE,KAAKjB,KAAL,CAAWJ,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,KAAD;AACA,MAAA,EAAE,EAAC,OADH;AAEA,MAAA,KAAK,EAAE,KAAKI,KAAL,CAAWG,KAFlB;AAGA,MAAA,SAAS,EAAE,KAAKH,KAAL,CAAWE,SAHtB;AAIA,MAAA,WAAW,EAAE,KAAKF,KAAL,CAAWC,WAJxB;AAKA,MAAA,EAAE,EAAE,KAAKR,EALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ;AAWH;;AAjE6B;;AAoElC,eAAeJ,GAAf","sourcesContent":["import React from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport {View} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Items from './panels/Items';\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            activePanel: 'items',\n            fetchedUser: null,\n            authToken: null,\n            items: []\n        };\n    \n    }\n    \n        \n    componentDidMount() {\n        connect.subscribe((e) => {\n            switch (e.detail.type) {\n                case 'VKWebAppGetUserInfoResult':\n                    if (e.detail.data.request_id === \"items\") {\n                        this.setState({\n                            items: e.detail.data.response.items\n                        })\n                    }\n                    break;\n                case 'VKWebAppAccessTokenReceived':\n                    this.setState({authToken: e.detail.data.access_token});\n                    this.getItems()\n                    break;\n                default:\n                    console.log(e.detail.type);\n            }\n        });\n        connect.send('VKWebAppGetUserInfo', {});\n        connect.send('VKWebAppGetAuthToken', {'app_id': 6396978, 'scope': 'market'});\n    }\n    \n    go = (e) => {\n        this.setState({activePanel: e.currentTarget.dataset.to})\n    };\n    \n    getItems() {\n        const ownerId = -124527492\n        connect.send('VKWebAppCallAPIMethod', {\n            \"method\": \"market.get\",\n            \"request_id\": \"items\",\n            \"params\": {\n                \"owner_id\": ownerId,\n                \"v\": \"5.92\",\n                \"access_token\": this.state.authToken\n            }\n\n        });\n    }\n    \n    render() {\n        return (\n            <View activePanel={this.state.activePanel}>\n                <Items \n                id=\"items\" \n                items={this.state.items} \n                authToken={this.state.authToken} \n                fetchedUser={this.state.fetchedUser} \n                go={this.go}\n                />\n            </View>\n        );\n    }\n}\n    \nexport default App;"]},"metadata":{},"sourceType":"module"}