{"ast":null,"code":"var _jsxFileName = \"D:\\\\lum3k\\\\Desktop\\\\vkApp\\\\src\\\\App.js\";\nimport React from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport { View } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport fetchJsonp from 'fetch-jsonp';\nimport Home from './panels/Home';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.go = e => {\n      this.setState({\n        activePanel: e.currentTarget.dataset.to\n      });\n    };\n\n    this.state = {\n      activePanel: 'home',\n      fetchedUser: null,\n      authToken: null,\n      items: [{\n        \"id\": 250409,\n        \"owner_id\": -124527492,\n        \"title\": \"Persik\",\n        \"description\": \"A majestic furball who adores to sleep, to purr, and to play with a computer mouse.\",\n        \"price\": {\n          \"amount\": \"100000\",\n          \"currency\": {\n            \"id\": 643,\n            \"name\": \"RUB\"\n          },\n          \"text\": \"1,000 rub.\"\n        },\n        \"category\": {\n          \"id\": 1001,\n          \"name\": \"Cats\",\n          \"section\": {\n            \"id\": 10,\n            \"name\": \"Pets\"\n          }\n        },\n        \"date\": 1467722904,\n        \"thumb_photo\": \"https://pp.vk.me/c631229/v631229852/3b6f3/SQ607FYCmy4.jpg\",\n        \"availability\": 0\n      }, {\n        \"id\": 250407,\n        \"owner_id\": -124527492,\n        \"title\": \"Spotty\",\n        \"description\": \"A tail wagging champion, true friend and never-failing warmer.\",\n        \"price\": {\n          \"amount\": \"100000\",\n          \"currency\": {\n            \"id\": 643,\n            \"name\": \"RUB\"\n          },\n          \"text\": \"1,000 rub.\"\n        },\n        \"category\": {\n          \"id\": 1000,\n          \"name\": \"Dogs\",\n          \"section\": {\n            \"id\": 10,\n            \"name\": \"Pets\"\n          }\n        },\n        \"date\": 1467722851,\n        \"thumb_photo\": \"https://pp.vk.me/c631229/v631229852/3b6e5/1OWGz65-8vw.jpg\",\n        \"availability\": 0\n      }]\n    };\n  }\n\n  componentDidMount() {\n    connect.subscribe(e => {\n      switch (e.detail.type) {\n        case 'VKWebAppGetUserInfoResult':\n          this.setState({\n            fetchedUser: e.detail.data\n          });\n          break;\n\n        case 'VKWebAppAccessTokenReceived':\n          this.setState({\n            authToken: e.detail.data.access_token\n          });\n          this.getItems();\n          break;\n\n        default:\n          console.log(e.detail.type);\n      }\n    });\n    connect.send('VKWebAppGetUserInfo', {});\n    connect.send('VKWebAppGetAuthToken', {\n      'app_id': 6396978,\n      'scope': 'market'\n    });\n  }\n\n  getItems() {\n    const ownerId = 124527492;\n    let api = \"https://api.vk.com/method/market.get?v=5.52&access_token=\".concat(this.state.authToken, \"&owner_id=-\").concat(ownerId);\n    fetchJsonp(api).then(res => res.json()).then(data => data.response.item).catch(e => []);\n  }\n\n  render() {\n    return React.createElement(View, {\n      activePanel: this.state.activePanel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Home, {\n      id: \"home\",\n      items: this.state.items,\n      authToken: this.state.authToken,\n      fetchedUser: this.state.fetchedUser,\n      go: this.go,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/lum3k/Desktop/vkApp/src/App.js"],"names":["React","connect","View","fetchJsonp","Home","App","Component","constructor","props","go","e","setState","activePanel","currentTarget","dataset","to","state","fetchedUser","authToken","items","componentDidMount","subscribe","detail","type","data","access_token","getItems","console","log","send","ownerId","api","then","res","json","response","item","catch","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport {View} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport fetchJsonp from 'fetch-jsonp';\n\nimport Home from './panels/Home';\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            activePanel: 'home',\n            fetchedUser: null,\n            authToken: null,\n            items: [\n                {\n                    \"id\": 250409,\n                    \"owner_id\": -124527492,\n                    \"title\": \"Persik\",\n                    \"description\": \"A majestic furball who adores to sleep, to purr, and to play with a computer mouse.\",\n                    \"price\": {\n                        \"amount\": \"100000\",\n                        \"currency\": {\n                            \"id\": 643,\n                            \"name\": \"RUB\"\n                        },\n                        \"text\": \"1,000 rub.\"\n                    },\n                    \"category\": {\n                        \"id\": 1001,\n                        \"name\": \"Cats\",\n                        \"section\": {\n                            \"id\": 10,\n                            \"name\": \"Pets\"\n                        }\n                    },\n                    \"date\": 1467722904,\n                    \"thumb_photo\": \"https://pp.vk.me/c631229/v631229852/3b6f3/SQ607FYCmy4.jpg\",\n                    \"availability\": 0\n                },\n                {\n                    \"id\": 250407,\n                    \"owner_id\": -124527492,\n                    \"title\": \"Spotty\",\n                    \"description\": \"A tail wagging champion, true friend and never-failing warmer.\",\n                    \"price\": {\n                        \"amount\": \"100000\",\n                        \"currency\": {\n                            \"id\": 643,\n                            \"name\": \"RUB\"\n                        },\n                        \"text\": \"1,000 rub.\"\n                    },\n                    \"category\": {\n                        \"id\": 1000,\n                        \"name\": \"Dogs\",\n                        \"section\": {\n                            \"id\": 10,\n                            \"name\": \"Pets\"\n                        }\n                    },\n                    \"date\": 1467722851,\n                    \"thumb_photo\": \"https://pp.vk.me/c631229/v631229852/3b6e5/1OWGz65-8vw.jpg\",\n                    \"availability\": 0\n                },\n               \n            ]\n        };\n    \n    };\n    \n        \n    componentDidMount() {\n        connect.subscribe((e) => {\n            switch (e.detail.type) {\n                case 'VKWebAppGetUserInfoResult':\n                    this.setState({fetchedUser: e.detail.data});\n                    break;\n                case 'VKWebAppAccessTokenReceived':\n                    this.setState({authToken: e.detail.data.access_token});\n                    this.getItems()\n                    break;\n                default:\n                    console.log(e.detail.type);\n            }\n        });\n        connect.send('VKWebAppGetUserInfo', {});\n        connect.send('VKWebAppGetAuthToken', {'app_id': 6396978, 'scope': 'market'});\n    };\n    \n    go = (e) => {\n        this.setState({activePanel: e.currentTarget.dataset.to})\n    };\n    \n    getItems() {\n        const ownerId = 124527492\n        let api = `https://api.vk.com/method/market.get?v=5.52&access_token=${this.state.authToken}&owner_id=-${ownerId}`\n        fetchJsonp(api)\n        .then(res => res.json())\n        .then(data => data.response.item)\n        .catch(e => [])\n    };\n    \n    render() {\n        return (\n            <View activePanel={this.state.activePanel}>\n                <Home id=\"home\" items={this.state.items} authToken={this.state.authToken} fetchedUser={this.state.fetchedUser} go={this.go}/>\n            </View>\n        );\n    }\n}\n    \nexport default App;"]},"metadata":{},"sourceType":"module"}